<!DOCTYPE html>
<html>
  <head>
    <title>더 좋은 액션 만들기 | QuickNotes</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/variable/pretendardvariable-dynamic-subset.css"><link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/static/pretendard-dynamic-subset.css"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:wght@400;600&family=Noto+Serif+KR:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

    <meta name="title" content="더 좋은 액션 만들기"><meta name="description" content="쏙쏙 들어오는 함수형 코딩 Ch05"><meta property="og:url" content="https://gitgitWi.github.io/quick-notes/books/fp/grokking-simplicity/ch05"><meta property="og:type" content="article"><meta property="og:title" content="더 좋은 액션 만들기"><meta property="og:description" content="쏙쏙 들어오는 함수형 코딩 Ch05"><meta property="og:locale" content="ko-KR"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="더 좋은 액션 만들기"><meta name="twitter:description" content="쏙쏙 들어오는 함수형 코딩 Ch05">

  <link rel="stylesheet" href="/quick-notes/assets/ch01.e2667cf1.css" />
<link rel="stylesheet" href="/quick-notes/assets/index.df67bca3.css" /></head>
  <body>
    <main class="w-full md:max-w-screen-lg h-full flex flex-col justify-start border border-indigo-50/70">
  <h1 class="w-full h-max p-4 text-center text-7xl font-extrabold text-indigo-50 select-none _textShadow_1mk9d_1">
  더 좋은 액션 만들기
</h1><article class="m-4 h-full overflow-auto text-indigo-50/90 select-none text-lg">
        <blockquote class="m-2 mb-6 py-2 px-6 border-b-2 border-indigo-200/60 border-double font-semibold font-serif text-lg text-indigo-200/90">쏙쏙 들어오는 함수형 코딩 Ch05</blockquote>

        <blockquote class="m-2 p-4 px-6 rounded-md font-serif italic text-base font-semibold leading-8 bg-indigo-300/90 text-indigo-900 shadow-md shadow-indigo-800/70">
<p>액션은 필요하다. 모든 액션을 없앨 수는 없다.</p>
<p>액션에서 암묵적 입/출력을 줄여 설계를 개선하자</p>
</blockquote>
<h2 id="암묵적-입력과-출력은-적을수록-좋다" class="mt-6 mb-4 text-5xl text-indigo-100 font-extrabold whitespace-normal break-words">암묵적 입력과 출력은 적을수록 좋다</h2>
<p>계산 뿐만 아니라, 액션에서도</p>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">어떤 함수에 암묵적 입/출력이 있다면 다른 컴포넌트와 강하게 연결된 컴포넌트</li>
<li class="ml-2 list-inside list-disc">다른 곳에서 사용할 수 없기 때문에 모듈이 아님</li>
</ul>
<h3 id="암묵적-입출력-줄이는-방법" class="my-4 text-3xl text-indigo-100/90 font-semibold italic whitespace-normal break-words">암묵적 입/출력 줄이는 방법</h3>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">전역/공용 변수를 직접 사용하는 대신 인자를 전달</li>
<li class="ml-2 list-inside list-disc">중복, 불필요한 코드 있는지 확인</li>
<li class="ml-2 list-inside list-disc">과한 코드는 다른 함수 안으로 옮기기</li>
</ul>
<h3 id="계산-분류하기" class="my-4 text-3xl text-indigo-100/90 font-semibold italic whitespace-normal break-words">계산 분류하기</h3>
<h4 id="의미-있는-계층별로-계산-분류" class="my-2 ml-2 text-xl text-indigo-200/90 font-bold underline whitespace-normal break-words">의미 있는 계층별로 계산 분류</h4>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">장바구니 코드
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">cart에 대한 동작</li>
<li class="ml-2 list-inside list-disc">item에 대한 동작</li>
<li class="ml-2 list-inside list-disc">비즈니스 규칙: 일반적인 전자상거래 서비스와는 다른 이 서비스만의 특별한 규칙</li>
</ul>
</li>
</ul>
<h3 id="엉켜있는-코드-풀기" class="my-4 text-3xl text-indigo-100/90 font-semibold italic whitespace-normal break-words">엉켜있는 코드 풀기</h3>
<p>설계는 엉켜있는 코드를 푸는 것</p>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">함수를 사용하면 관심사를 자연스럽게 분리할 수 있음</li>
<li class="ml-2 list-inside list-disc">분리된 것은 언제든 쉽게 조합할 수 있음</li>
</ul>
<h4 id="additem을-분리해-더-좋은-설계-만들기" class="my-2 ml-2 text-xl text-indigo-200/90 font-bold underline whitespace-normal break-words"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800">addItem()</code>을 분리해 더 좋은 설계 만들기</h4>
<h5 id="기존코드" class="my-2 ml-2 text-lg text-indigo-100/90 font-bold whitespace-normal break-words">기존코드</h5>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">간단해 보이지만 4가지 역할을 하고 있음</li>
<li class="ml-2 list-inside list-disc">cart와 item 구조를 모두 알고 있음</li>
</ul>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">addItem</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">name</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">price</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 1. 배열 복사</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">newCart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">slice</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 2. item 객체 생성</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 3. 복사본에 item 추가</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">newCart</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">push</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">name</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">price</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 4. 복사본 리턴</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">newCart</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<h5 id="item에-관한-코드를-별도-함수로-분리" class="my-2 ml-2 text-lg text-indigo-100/90 font-bold whitespace-normal break-words">item에 관한 코드를 별도 함수로 분리</h5>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800">makeCartItem</code>: item 구조만 알고 있는 함수</li>
<li class="ml-2 list-inside list-disc"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800">addItem</code>: cart 구조만 알고 있는 함수</li>
<li class="ml-2 list-inside list-disc">👉 cart, item을 독립적으로 확장할 수 있음</li>
</ul>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">makeCartItem</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">name</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">price</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">name</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">price</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">addItem</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">item</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">newCart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">slice</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">newCart</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">push</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">item</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">newCart</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<h5 id="copy-on-write-패턴-빼내기" class="my-2 ml-2 text-lg text-indigo-100/90 font-bold whitespace-normal break-words"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800">copy-on-write</code> 패턴 빼내기</h5>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">addItem은 크기가 작고 괜찮은 함수이지만</li>
<li class="ml-2 list-inside list-disc"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800">copy-on-write</code>를 사용해 배열에 항목을 추가하는 함수이므로, 이 부분을 분리</li>
<li class="ml-2 list-inside list-disc">어떤 배열/항목에도 쓸 수 있는 유틸리티 함수로 분리</li>
</ul>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#616E88">// `copy-on-write` 분리</span></span>
<span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">addElementLast</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">elem</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">newArray</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">slice</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">newArray</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">push</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">elem</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">newArray</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">makeCartItem</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">name</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">price</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">name</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">price</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">addItem</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">item</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">addElementLast</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">item</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<h5 id="계산-분류-다시하기" class="my-2 ml-2 text-lg text-indigo-100/90 font-bold whitespace-normal break-words">계산 분류 다시하기</h5>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">장바구니 코드
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">cart에 대한 동작</li>
<li class="ml-2 list-inside list-disc">item에 대한 동작</li>
<li class="ml-2 list-inside list-disc">비즈니스 규칙</li>
<li class="ml-2 list-inside list-disc"><strong>배열 유틸리티</strong> 👈 새로 추가됨</li>
</ul>
</li>
</ul>

        <!-- TODO: seperate component -->
        <div class="pt-4 text-sm text-indigo-200/90 italic font-light cursor-default text-right">
          #develop #fp
        </div>
      </article>
</main>
  </body>
</html>