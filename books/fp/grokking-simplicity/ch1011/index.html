<!DOCTYPE html>
<html>
  <head>
    <title>일급 함수 | QuickNotes</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/variable/pretendardvariable-dynamic-subset.css"><link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/static/pretendard-dynamic-subset.css"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:wght@400;600&family=Noto+Serif+KR:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

    <meta name="title" content="일급 함수"><meta name="description" content="[쏙쏙 들어오는 함수형 코딩 Ch10-11]"><meta property="og:url" content="https://gitgitWi.github.io/quick-notes/books/fp/grokking-simplicity/ch1011"><meta property="og:type" content="article"><meta property="og:title" content="일급 함수"><meta property="og:description" content="[쏙쏙 들어오는 함수형 코딩 Ch10-11]"><meta property="og:locale" content="ko-KR"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="일급 함수"><meta name="twitter:description" content="[쏙쏙 들어오는 함수형 코딩 Ch10-11]">

  <link rel="stylesheet" href="/quick-notes/assets/ch01.e0397ea7.css" />
<link rel="stylesheet" href="/quick-notes/assets/index.df67bca3.css" /></head>
  <body>
    <main class="w-full md:max-w-screen-lg h-full flex flex-col justify-start border border-indigo-50/70">
  <h1 class="w-full h-max p-4 text-center text-7xl font-extrabold text-indigo-50 select-none _textShadow_1mk9d_1">
  일급 함수
</h1><article class="m-4 h-full overflow-auto text-indigo-50/90 select-none text-lg">
        <blockquote class="m-2 mb-6 py-2 px-6 border-b-2 border-indigo-200/60 border-double font-semibold font-serif text-lg text-indigo-200/90">[쏙쏙 들어오는 함수형 코딩 Ch10-11]</blockquote>

        <blockquote class="m-2 p-4 px-6 rounded-md font-serif italic text-base font-semibold leading-8 bg-indigo-300/90 text-indigo-900 shadow-md shadow-indigo-800/70">
<p>코드 냄새와 중복을 없애 추상화를 잘할 수 있는 리팩터링 두 가지</p>
</blockquote>
<h2 id="암묵적-인자를-드러내기-express-implicit-argument" class="mt-6 mb-4 text-5xl text-indigo-100 font-extrabold whitespace-normal break-words">암묵적 인자를 드러내기 <code><em>express implicit argument</em></code></h2>
<h3 id="코드의-냄새-함수-이름에-있는-암묵적-인자" class="my-4 text-3xl text-indigo-100/90 font-semibold italic whitespace-normal break-words">코드의 냄새: 함수 이름에 있는 암묵적 인자</h3>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">함수 구현이 거의 똑같음</li>
<li class="ml-2 list-inside list-disc">함수 이름이 구현의 차이를 만듦</li>
<li class="ml-2 list-inside list-disc">ex.
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#D8DEE9">cart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">setPriceByName</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">shoe</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">13</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9">cart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">setQuantityByName</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">shoe</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">13</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9">cart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">setShippingByName</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">shoe</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">0</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9">cart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">setTaxByName</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">shoe</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">2.34</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span></code></pre>
</li>
</ul>
<h3 id="리팩터링" class="my-4 text-3xl text-indigo-100/90 font-semibold italic whitespace-normal break-words">리팩터링</h3>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">함수 이름에 있는 암묵적 인자를 확인</li>
<li class="ml-2 list-inside list-disc">명시적인 인자를 추가
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc"><strong>일급 값으로 만드는 것이 중요</strong></li>
</ul>
</li>
<li class="ml-2 list-inside list-disc">함수 본문에 하드 코딩된 값을 새로운 인자로 바꾸기</li>
<li class="ml-2 list-inside list-disc">함수 호출부 고치기</li>
<li class="ml-2 list-inside list-disc">ex.
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#D8DEE9">cart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">setFieldByName</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">shoe</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">price</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">13</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9">cart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">setFieldByName</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">shoe</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">quantity</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">13</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9">cart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">setFieldByName</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">shoe</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">shipping</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">0</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9">cart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">setFieldByName</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">shoe</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">tax</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#B48EAD">2.34</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span></code></pre>
</li>
</ul>
<h3 id="일급인-것과-일급이-아닌-것을-구별하기" class="my-4 text-3xl text-indigo-100/90 font-semibold italic whitespace-normal break-words">일급인 것과 일급이 아닌 것을 구별하기</h3>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">JS에서 일급이 아닌 것: 수식 연산자, 반복문, 조건문, <code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800">try</code>/<code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800">catch</code> 블록</li>
<li class="ml-2 list-inside list-disc">일급으로 할 수 있는 것
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">변수에 할당</li>
<li class="ml-2 list-inside list-disc">함수의 인자로 넘기기</li>
<li class="ml-2 list-inside list-disc">함수의 리턴값으로 받기</li>
<li class="ml-2 list-inside list-disc">배열이나 객체에 담기</li>
</ul>
</li>
<li class="ml-2 list-inside list-disc">일급이 아닌 것을 찾아 일급으로 바꾸는 기술이 FP에서 중요
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">ex. <code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800">+</code> 연산자는 변수에 할당할 수 없지만 <code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800">function plus(a, b)</code>와 같은 함수를 만들 수 있음</li>
</ul>
</li>
</ul>
<h3 id="일급-필드를-사용하면-api를-바꾸기-더-어려워지는-게-아닐까" class="my-4 text-3xl text-indigo-100/90 font-semibold italic whitespace-normal break-words">일급 필드를 사용하면 API를 바꾸기 더 어려워지는 게 아닐까?</h3>
<p>코드 전체를 바꾸지 않고, 추상화 벽 위에서 기존 필드명을 그대로 사용하고 싶다면, 내부에서 간단히 바꿔주면 된다</p>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">validItemFields</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> [</span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">price</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">quantity</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">shipping</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">tax</span><span style="color:#ECEFF4">&#39;</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">number</span><span style="color:#ECEFF4">&#39;</span><span style="color:#D8DEE9FF">]</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">translations</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">quantity</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">number</span><span style="color:#ECEFF4">&#39;</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">}</span><span style="color:#81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">setFieldByName</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">name</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">field</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">value</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 런타임에도 안전하게 문자열 검사</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#81A1C1">!</span><span style="color:#D8DEE9">validItemFields</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">includes</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">field</span><span style="color:#D8DEE9FF">)) </span><span style="color:#81A1C1">throw</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">&#39;</span><span style="color:#A3BE8C">Not a Valid item field</span><span style="color:#ECEFF4">&#39;</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 새로운 필드명으로 바꾸기</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">translations</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">hasOwnProperty</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">field</span><span style="color:#D8DEE9FF">)) </span><span style="color:#D8DEE9">field</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">translations</span><span style="color:#D8DEE9FF">[</span><span style="color:#D8DEE9">field</span><span style="color:#D8DEE9FF">]</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">item</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">cart</span><span style="color:#D8DEE9FF">[</span><span style="color:#D8DEE9">name</span><span style="color:#D8DEE9FF">]</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">newItem</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">objectSet</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">item</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">field</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">value</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">newCart</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">objectSet</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">cart</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">name</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">newItem</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">newCart</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<h3 id="데이터-지향-data-orientaion" class="my-4 text-3xl text-indigo-100/90 font-semibold italic whitespace-normal break-words">데이터 지향 <code><em>data orientaion</em></code></h3>
<p>이벤트와 엔티티에 대한 사실을 표현하기 위한 일반 데이터 구조를 사용하는 프로그래밍 형식</p>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">객체, 배열</li>
<li class="ml-2 list-inside list-disc">일반적인 엔티티는 일반적인 데이터 구조를 사용해야 한다</li>
<li class="ml-2 list-inside list-disc">데이터가 미래에 어떤 방법으로 해석될지 미리 알 수 없기 때문에 필요할 때 알맞은 방법으로 해석할 수 있어야</li>
</ul>
<h2 id="함수-본문을-콜백으로-바꾸기-replace-body-with-callback" class="mt-6 mb-4 text-5xl text-indigo-100 font-extrabold whitespace-normal break-words">함수 본문을 콜백으로 바꾸기 <code><em>replace body with callback</em></code></h2>
<p>공통 본문을 고차 함수로 분리</p>
<h3 id="리팩터링-1" class="my-4 text-3xl text-indigo-100/90 font-semibold italic whitespace-normal break-words">리팩터링</h3>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">함수 본문에서 바꿀 부분의 앞부분-뒷부분 확인</li>
<li class="ml-2 list-inside list-disc">리팩터링 할 코드를 함수로 빼내기</li>
<li class="ml-2 list-inside list-disc">빼낸 함수의 인자로 넘길 부분을 또 다른 함수로 빼내기</li>
</ul>
<h4 id="ex" class="my-2 ml-2 text-xl text-indigo-200/90 font-bold underline whitespace-normal break-words">ex.</h4>
<p>원래 코드 함수 본문에서 바꿀 부분의 앞부분-뒷부분 확인</p>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#616E88">// 앞부분</span></span>
<span class="line"><span style="color:#81A1C1">try</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 본문</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">saveUserData</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">user</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 뒷부분</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">catch</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">logToSnapErrors</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// 앞부분</span></span>
<span class="line"><span style="color:#81A1C1">try</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 본문</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">fetchProduct</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">productId</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 뒷부분</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">catch</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">logToSnapErrors</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<p>리팩터링 할 코드를 함수로 빼내기</p>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">withLogging</span><span style="color:#ECEFF4">()</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">try</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">    </span><span style="color:#616E88">// 본문</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">fetchProduct</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">productId</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">    </span><span style="color:#616E88">// 뒷부분</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">catch</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">logToSnapErrors</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0">withLogging</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span></code></pre>
<p>빼낸 함수의 인자로 넘길 부분을 또 다른 함수로 빼내기</p>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">withLogging</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">f</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">try</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">f</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">catch</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">logToSnapErrors</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// 인자로 넘길 본문을 익명 함수로 빼내기</span></span>
<span class="line"><span style="color:#88C0D0">withLogging</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">()</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=&gt;</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">saveUserData</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">user</span><span style="color:#D8DEE9FF">))</span><span style="color:#81A1C1">;</span></span></code></pre>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">함수에 일반 데이터 값이 아닌 함수를 전달하는 이유
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">함수 안에 있는 코드가 특정 문맥 안에서 실행돼야 하기 때문</li>
<li class="ml-2 list-inside list-disc">고차 함수를 쓰면 다른 곳에 정의된 문맥에서 코드를 실행할 수 있음</li>
</ul>
</li>
</ul>
<h2 id="배열-copy-on-write-리팩토링" class="mt-6 mb-4 text-5xl text-indigo-100 font-extrabold whitespace-normal break-words">배열 copy-on-write 리팩토링</h2>
<p>원래 코드</p>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">arraySet</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">idx</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">value</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">slice</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 바뀌는 본문</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#D8DEE9FF">[</span><span style="color:#D8DEE9">idx</span><span style="color:#D8DEE9FF">] </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">value</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">arrayPush</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">element</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">slice</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 바뀌는 본문</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">push</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">element</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">arrayDropLast</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">slice</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 바뀌는 본문</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">pop</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">arrayDropFirst</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">slice</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">  </span><span style="color:#616E88">// 바뀌는 본문</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">shift</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<p>함수 빼내기, 콜백 빼내기</p>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">arraySet</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">idx</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">value</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">withArrayCopy</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">copiedArray</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=&gt;</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#ECEFF4">    </span><span style="color:#616E88">// 바뀌는 본문을 익명 함수로 빼내기</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#D8DEE9FF">[</span><span style="color:#D8DEE9">idx</span><span style="color:#D8DEE9FF">] </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">value</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88">// 바뀌지 않는 부분을 함수로 빼내기</span></span>
<span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">withArrayCopy</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">callback</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">array</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">slice</span><span style="color:#D8DEE9FF">()</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">callback</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">copiedArray</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">return</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">copiedArray</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<h2 id="logging-함수-리팩토링" class="mt-6 mb-4 text-5xl text-indigo-100 font-extrabold whitespace-normal break-words">logging 함수 리팩토링</h2>
<ul class="ml-2 mb-2">
<li class="ml-2 list-inside list-disc">로그를 남기지 않는 함수를 로그를 남기는 함수로 감싸기</li>
</ul>
<p>원래 함수</p>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">try</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">saveUserData</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">user</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">catch</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">logToSnapErrors</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">try</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">fetchProduct</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">productId</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">catch</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">logToSnapErrors</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<p>이름을 명확하게 바꿈</p>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">try</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">saveUserDataNoLogging</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">user</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">catch</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">logToSnapErrors</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">try</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">fetchProductWithNoLogging</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">productId</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">catch</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#88C0D0">logToSnapErrors</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<p>중복 제거; 익명 함수로 만들고, 인자를 일반적인 이름으로 바꾸기</p>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">arg</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">try</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">saveUserDataNoLogging</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">arg</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">catch</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">logToSnapErrors</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span></code></pre>
<p>함수 본문을 콜백으로 바꾸기</p>
<pre class="w-11/12 p-2 pl-4 m-3 mb-6 rounded-xl overflow-x-auto bg-slate-800/50 text-sm _codeSnippet_1fksl_1"><code class="p-1 rounded-md font-mono text-base bg-indigo-400 text-indigo-800"><span class="line"><span style="color:#81A1C1">function</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">wrapLogging</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">f</span><span style="color:#ECEFF4">)</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#81A1C1">try</span><span style="color:#D8DEE9FF"> </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">f</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">arg</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">catch</span><span style="color:#D8DEE9FF"> (</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">) </span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span><span style="color:#88C0D0">logToSnapErrors</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">error</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span><span style="color:#ECEFF4">}</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">saveUserDataWithLogging</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">wrapLogging</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">saveUserDataNoLogging</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span>
<span class="line"><span style="color:#81A1C1">const</span><span style="color:#D8DEE9FF"> </span><span style="color:#D8DEE9">fetchProductaWithLogging</span><span style="color:#D8DEE9FF"> </span><span style="color:#81A1C1">=</span><span style="color:#D8DEE9FF"> </span><span style="color:#88C0D0">wrapLogging</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">fetchProductNoLogging</span><span style="color:#D8DEE9FF">)</span><span style="color:#81A1C1">;</span></span></code></pre>
<blockquote class="m-2 p-4 px-6 rounded-md font-serif italic text-base font-semibold leading-8 bg-indigo-300/90 text-indigo-900 shadow-md shadow-indigo-800/70">
<p>함수를 리턴하는 함수는 <strong>함수 팩토리</strong>와 같다</p>
</blockquote>
<blockquote class="m-2 p-4 px-6 rounded-md font-serif italic text-base font-semibold leading-8 bg-indigo-300/90 text-indigo-900 shadow-md shadow-indigo-800/70">
<p>전체 프로그램을 고차 함수로 만들어도 될까?</p>
<p>가능하겠지만, 더 중요한 질문은 “정말 그것이 필요한가”임</p>
<p>고차 함수는 강력하지만, 비용이 따름.</p>
<p>직관적인 방법에 비해, 코드가 더 읽기 쉬운가? 중복 코드를 없앨 수 있는가? 코드가 하는 일이 무엇인지 쉽게 알 수 있는가? 등 질문들을 놓치면 안된다</p>
</blockquote>

        <!-- TODO: seperate component -->
        <div class="pt-4 text-sm text-indigo-200/90 italic font-light cursor-default text-right">
          #develop #fp #first_class #higher-order_function
        </div>
      </article>
</main>
  </body>
</html>